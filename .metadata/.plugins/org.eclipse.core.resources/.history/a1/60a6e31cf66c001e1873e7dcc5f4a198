#include "LQ_GPT12_ENC.H"
#include "LQ_TFT18.h"
#include "stdio.h"
#include "My_Timer.h"
#include "PID.h"

char txt[64];

volatile float EncVal_L,EncVal_R,EncVal_F;

void My_EncInit (void)
{
    ENC_InitConfig(ENC4_InPut_P02_8, ENC4_Dir_P33_5);//锟斤拷锟斤拷锟斤拷A锟斤拷锟斤拷值
    ENC_InitConfig(ENC5_InPut_P10_3, ENC5_Dir_P10_1);//锟斤拷锟斤拷锟斤拷B锟斤拷锟斤拷值
    ENC_InitConfig(ENC6_InPut_P20_3, ENC6_Dir_P20_0);//锟叫斤拷锟斤拷锟斤拷锟斤拷锟街�
}


void Get_EncVal(void)
{
    /* 锟斤拷取锟斤拷锟斤拷锟斤拷值 */
    EncVal_R = ENC_GetCounter(ENC5_InPut_P10_3); //鍙宠竟
    EncVal_L = ENC_GetCounter(ENC4_InPut_P02_8); //宸﹁竟
    EncVal_F = ENC_GetCounter(ENC6_InPut_P20_3); //宸﹁竟
}

void Show_EncVal(void)
{
   // 显示PID
//   sprintf(txt, "%.0f", PID_Struct.Kp_Angle);
//   TFTSPI_P8X16Str(1, 0, txt, u16WHITE, u16BLACK);
   sprintf(txt, "%.2f", PID_Struct.Kd_Angle);
   TFTSPI_P8X16Str(5, 0, txt, u16WHITE, u16BLACK);
   sprintf(txt, "%.1f", PID_Struct.Kp_Angle);
   TFTSPI_P8X16Str(9, 0, txt, u16WHITE, u16BLACK);

   //显示  动量轮 和 行进电机 PWM
   sprintf(txt, "PWM: %05.2f", Pid_Out);
   TFTSPI_P8X16Str(1, 1, txt, u16WHITE, u16BLACK);       //锟街凤拷锟斤拷锟斤拷示
   sprintf(txt, "PWM: %05.2f", Pid_Out_F);
   TFTSPI_P8X16Str(1, 2, txt, u16WHITE, u16BLACK);       //锟街凤拷锟斤拷锟斤拷示


   //显示编码器的值
//   sprintf(txt, "E1: %05.0f", EncVal_R);
//   TFTSPI_P8X16Str(1, 1, txt, u16WHITE, u16BLACK);
//   sprintf(txt, "E2: %05.0f", EncVal_L);
//   TFTSPI_P8X16Str(1, 2, txt, u16WHITE, u16BLACK);
   sprintf(txt, "E3: %05.0f", EncVal_F);
   TFTSPI_P8X16Str(1, 6, txt, u16WHITE, u16BLACK);



}
